<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>In The Middle - Holiday Edition</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700;900&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root {
    --color-navy: #003057;
    --color-light-blue: #9BCBEB;
    --color-red: #FF4B4B;       /* Brighter red */
    --color-green: #28A745;     /* Distinct green */
    --font-primary: 'Merriweather', serif;
    --font-secondary: 'Open Sans', sans-serif;
}
body {
    font-family: var(--font-secondary);
    background-color: #F0F8FF; /* light blue holiday feel */
}

/* Scrollbar */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: #f0f0f0; }
::-webkit-scrollbar-thumb { background: var(--color-light-blue); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: var(--color-navy); }

/* Header */
header h1 { font-family: var(--font-primary); color: var(--color-navy); }
header p { font-family: var(--font-secondary); color: #333; }

/* Article cards */
.article-card {
    border-radius: 1rem;
    overflow: hidden;
    box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
    transition: transform 0.2s, box-shadow 0.2s;
    cursor: pointer;
    display: flex;
    flex-direction: column;
}
.article-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 20px rgba(0,0,0,0.2);
}

/* Alternating red/green */
.article-card.red { background-color: rgba(255,75,75,0.15); }
.article-card.green { background-color: rgba(40,167,69,0.15); }

/* Card content */
.article-card img {
    width: 100%;
    height: 180px;
    object-fit: cover;
    object-position: center;
    flex-shrink: 0;
}
.article-card .card-body {
    padding: 1rem;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}
.article-card .category { font-size: 0.75rem; text-transform: uppercase; color: var(--color-light-blue); font-weight: 600; margin-bottom: 0.25rem; }
.article-card .title { font-family: var(--font-primary); font-weight: 900; font-size: 1.25rem; color: var(--color-navy); line-height: 1.2; }
.article-card .description { font-family: var(--font-secondary); color: #333; font-size: 0.875rem; margin-top: 0.5rem; }

/* Modal */
.modal-overlay {
    z-index: 1000;
    background-color: rgba(0,0,0,0.75);
    transition: opacity 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    position: fixed;
    inset: 0;
    opacity: 0;
    pointer-events: none;
}
.modal-overlay.active { opacity: 1; pointer-events: all; }
.modal-content {
    background: #fff;
    border-radius: 1rem;
    max-width: 90vw;
    max-height: 90vh;
    padding: 1.5rem;
    overflow-y: auto;
    box-shadow: 0 25px 50px rgba(0,0,0,0.5);
}
.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: start;
    border-bottom: 1px solid #ccc;
    padding-bottom: 0.5rem;
    margin-bottom: 1rem;
    position: sticky;
    top: 0;
    background: #fff;
}
.modal-header h3 { font-family: var(--font-primary); font-weight: 900; color: var(--color-navy); font-size: 1.5rem; }
.modal-body { font-family: var(--font-secondary); color: #333; line-height: 1.5; font-size: 0.95rem; }
.modal-close { background: none; border: none; cursor: pointer; }

.tooltip-floating {
    position: fixed; background-color: var(--color-navy); color: #fff;
    padding: 8px 10px; border-radius: 8px; font-size: 0.9rem; line-height:1.2;
    z-index: 99999; pointer-events: none; max-width: 320px; text-align:left;
    transform: translate(-50%, -100%) scale(0.98); opacity: 0;
    transition: opacity 0.18s ease, transform 0.18s ease;
    box-shadow: 0 6px 18px rgba(0,0,0,0.18);
}
.tooltip-floating.visible { opacity:1; transform: translate(-50%, -120%) scale(1); }
.tooltip-floating::after {
    content:""; position:absolute; left:50%; transform: translateX(-50%); bottom:-6px;
    border-width:6px; border-style:solid; border-color: var(--color-navy) transparent transparent transparent;
}
    .tooltiptext {
    display: none;
}

.modal-category {
    display: block;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--color-green);
    margin-bottom: 0.25rem;
}
</style>
</head>
<body class="p-6">

<header class="mb-8 text-center">
    <h1 class="text-4xl sm:text-6xl font-black">In The Middle</h1>
    <p class="text-xl sm:text-2xl mt-2">Holiday Edition - The Episcopal Academy MS Newspaper</p>
</header>

<main id="article-grid" class="grid gap-6 md:grid-cols-2 lg:grid-cols-3 max-w-7xl mx-auto">
    <p id="loading-message" class="col-span-full text-center text-gray-500">Loading articles...</p>
</main>

<!-- Modal -->
<div id="article-modal" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="modal-title"></h3>
            <button class="modal-close" onclick="closeModal()">&times;</button>
        </div>
        <div id="modal-body" class="modal-body"></div>
    </div>
</div>

<script>
let articles = {
    news: {
    title: "News & Features",
    description: "The section with all of the latest campus news! Includes policy changes, student activity, trips, and more!",
    category: "Section",
    image: "https://www.phillymag.com/wp-content/uploads/sites/57/2024/09/Campus-Green-Chapel-Crowds-ps.jpg",
    content: `
        <p class="mb-4">
            This is the <strong>News & Features</strong> section. Here, we cover major school announcements,
            student achievements, and deep-dive features into campus life.
        </p>

        <p class="font-bold text-lg text-navy mb-2">In This Edition:</p>

        <ul class="list-disc pl-5 space-y-1">
            <li>
                <span class="tooltip">
                    <u><strong>
                        <a href="chapco.html"
                           class="article-title article-link" rel="noopener noreferrer">
                           Chapel Council Corner
                        </a>
                    </strong></u>
                    <span class="tooltiptext">
                        Recent news from ChapCo! Authors: <i>Ellen Le ('30)</i>
                    </span>
                </span>
            </li>

            <li>
                <span class="tooltip">
                    <u><strong>
                        <a href="stuco.html"
                           class="article-title article-link" rel="noopener noreferrer">
                           Student Council Corner
                        </a>
                    </strong></u>
                    <span class="tooltiptext">
                        The hottest news from the Student Council! Author: <i>Gus Ebmeyer ('30)</i>
                    </span>
                </span>
            </li>
        </ul>
                                 <li>
            <span class="tooltip"><strong><u><a href="cookiedrive.html" class="article-title article-link" rel="noopener noreferrer">MS Cookie Drive</a></u></strong>
                <span class="tooltiptext">All about the MS Cookie Drive. Author: <i>Sara Adibi ('31)</i></span>
            </span>
        </li>
                   
    `,
    author: ""
},
    opinion: {
        title: "Fun & Games",
        description: "The place for puzzles, riddles, polls, and more!",
        category: "Section",
        image: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/14/CrosswordUSA.svg/1200px-CrosswordUSA.svg.png",
        content:`<p class="mb-4">The <strong>Fun & Games</strong> section is where all of the games made by our staff go! This may include word searches, crosswords, fun facts, and more! In addition, polls from the EA community will be placed here. Does everyone agree?</p>
                    <p class="font-bold text-lg text-navy mb-2">In This Edition:</p>
                    <ul class="list-disc pl-5 space-y-1">
                        <li>
            <span class="tooltip"><strong><u><a href="puzzles.html" class="article-title article-link" rel="noopener noreferrer">Crossword/Wordsearch and other Puzzles</a></u></strong>
                <span class="tooltiptext">Various puzzles created by our staff! Creators: <i>Ellie Wood ('32), Sunishka Agrawal ('32), and Tess McNeely ('31)</i></span>
            </span>
        </li>
                        <li>
            <span class="tooltip"><strong><u><a href="holidayactivities.html" class="article-title article-link" rel="noopener noreferrer">Newspaper Holiday Activities</a></u></strong>
                <span class="tooltiptext">Fun holiday-themed activities from In The Middle! Creators: <i>Arden Cha, Ava Budreika, Campbell Baird</i></span>
            </span>
        </li>
 </ul>`,
        author: ""
    },
    athletics: {
        title: "Sports & Athletics",
        description: "Scores, team highlights, and spotlights on middle school athletes across all seasonal sports.",
        category: "Section",
        image: "https://resources.finalsite.net/images/f_auto,q_auto,t_image_size_6/v1747664955/episcopalacademypa/m2tmbt97ckopdavsuhx2/athlanding1.jpg",
        content: `<p>No news here... check out a different section!</p>`,
        author: ""
    },
    arts: {
        title: "Arts & Culture",
        description: "Coverage of theater productions, art shows, band concerts, and creative student work.",
        category: "Section",
        image: "https://resources.finalsite.net/images/f_auto,q_auto,t_image_size_6/v1747664950/episcopalacademypa/c19kays4aib1z3aoljip/artscccg.jpg",
        content:`<p class="mb-4">The <strong>Arts & Culture</strong> section celebrates creativity! Find reviews, interviews, and features on student artists, musicians, and performers.</p>
                    <p class="font-bold text-lg text-navy mb-2">In This Edition:</p>
                    <ul class="list-disc pl-5 space-y-1">
                       <li>
            <span class="tooltip"><strong><u><a href="secretsanta.html" class="article-title article-link" rel="noopener noreferrer">Secret Santa Gift Ideas</a></u></strong>
                <span class="tooltiptext">Gift Ideas for Secret Santa from our Editors. Authors: <i>Leo Wang ('30) and Ellen Le ('30)</i></span>
            </span>
        </li>
                        <li>
            <span class="tooltip"><strong><u><a href="winter-concert.html" class="article-title article-link" rel="noopener noreferrer">Winter Concert</a></u></strong>
                <span class="tooltiptext">Fresh information and news about the MS Winter Concert. Author: <i>Leo Wang ('30), Zach Chen ('30), and Adam Balogun ('30)</i></span>
            </span>
        </li>
                        <li>
            <span class="tooltip"><strong><u><a href="holidays.html" class="article-title article-link" rel="noopener noreferrer">Winter Holidays</a></u></strong>
                <span class="tooltiptext">An overview of many holidays occurring this Winter. Christmas isn't the only one! Author: <i>Ellen Le ('30)</i></span>
            </span>
        </li>
                        
                    </ul>`,
        author: ""
    },
    join: {
                title: "Join the Staff!",
                description: "Are you interested in writing, photography, or editing? See how you can get involved!",
                category: "Opportunity",
                image: "https://lh3.google.com/u/0/d/1C-eS_ieobBY6dsFGnCO2dQDVXAFrx2_Q=w3270-h1824-iv1?auditContext=thumbnail&auditContext=forDisplay",
                content: `
                    <p class="text-lg font-bold text-navy mb-4">Are you interested in being on the Newspaper staff?</p>
                    <p class="mb-6">We are still looking for dedicated <span class="font-bold">writing staff and photographers</span> to help us cover all the exciting news around the school!</p>

                    <h4 class="text-xl font-primary font-bold text-navy mb-2">《 Head Newspaper Staff 》</h4>
                    <ul class="list-disc pl-5 space-y-2 mb-6">
                        <li><strong>Faculty Advisors:</strong> Ms. Silberman and Ms. McGill</li>
                        <li><strong>Editors-in-Chief:</strong> Ellen Le ('30) and Sara Adibi ('31)</li>
                        <li><strong>Content Editors:</strong> Leo Wang ('30) and Victor Tsai ('30)</li>
                    </ul>

                    <p class="text-base">
                        Reach out to <span class="font-bold">Ms. McGill</span> at 
                        <a href="mailto:mmcgill@episcopalacademy.org" class="text-light-blue hover:text-navy font-semibold underline">mmcgill@episcopalacademy.org</a> 
                        or <span class="font-bold">Ellen Le</span> at <a href="mailto:lee30@episcopalacademy.org" class="text-light-blue hover:text-navy font-semibold underline">lee30@episcopalacademy.org</a> for more information and to find out how you can contribute.
                    </p>
                `,
                author: ""
            },
            archive: {
    title: "Archive",
    description: "View past issues of the newspaper.",
    category: "Archive",
    image: "https://delco.today/wp-content/uploads/sites/3/2017/05/episcopal-970x550.jpg",
    content: `
        <p class="text-lg font-bold text-navy mb-4">Past Issues</p>
        <p class="mb-6">
            You can browse all previous editions of the newspaper on our archive page.
        </p>

        <a 
            href="archive.html" 
            class="text-light-blue underline font-semibold hover:text-navy article-link"
        >
            Go to the full archive →
        </a>
    `,
    author: ""
}
};

const articleGrid = document.getElementById('article-grid');
const modal = document.getElementById('article-modal');
const modalTitle = document.getElementById('modal-title');
const modalBody = document.getElementById('modal-body');

function loadArticles() {
    articleGrid.innerHTML = '';
    let i = 0;
    for (const key in articles) {
        if (articles.hasOwnProperty(key)) {
            const section = articles[key];
            const colorClass = i % 2 === 0 ? 'red' : 'green';
            const card = document.createElement('div');
            card.className = `article-card ${colorClass}`;
            card.onclick = () => openModal(key);

            const img = document.createElement('img');
            img.src = section.image || 'https://placehold.co/600x400/f0f0f0/666666?text=NO+IMAGE';
            img.alt = section.title;
            card.appendChild(img);

            const bodyDiv = document.createElement('div');
            bodyDiv.className = 'card-body';
            bodyDiv.innerHTML = `
                <p class="category">${section.category}</p>
                <h2 class="title">${section.title}</h2>
                <p class="description">${section.description}</p>
            `;
            card.appendChild(bodyDiv);
            articleGrid.appendChild(card);
            i++;
        }
    }
}

function openModal(key) {
    const article = articles[key];
    if (!article) return;
    modalTitle.innerHTML = `
        <span class="modal-category">${article.category}</span>
        ${article.title}
    `;
    modalBody.innerHTML = article.content;
    modal.classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeModal() {
    modal.classList.remove('active');
    document.body.style.overflow = '';
}

window.onload = loadArticles;

// Tooltip floating
(function() {
    const floatTip = document.createElement('div');
    floatTip.className = 'tooltip-floating';
    document.body.appendChild(floatTip);
    let activeTarget = null, hideTimeout = null;
    
    function showTip(target, html) {
        floatTip.classList.add('visible');
        clearTimeout(hideTimeout);
        activeTarget = target;
        floatTip.innerHTML = html;
        positionTip(target);
    }
    
    function hideTip() {
        floatTip.classList.remove('visible');
        activeTarget = null;
    }
    
    function positionTip(target) {
        const rect = target.getBoundingClientRect();
        floatTip.style.left = `${rect.left + rect.width / 2}px`;
        floatTip.style.top = `${rect.top - 10}px`;
    }
    document.body.addEventListener('pointerenter', e => {
        const t = e.target.closest('.tooltip');
        if (!t) return;
        const tt = t.querySelector('.tooltiptext');
        if (!tt) return;
        showTip(t, tt.innerHTML);
    }, true);

    document.body.addEventListener('pointerleave', e => {
        const t = e.target.closest('.tooltip');
        const toEl = e.relatedTarget && e.relatedTarget.closest
            ? e.relatedTarget.closest('.tooltip')
            : null;
        if (!t) return;
        if (toEl) return; // moving to another tooltip
        hideTip();
    }, true);

    document.body.addEventListener('pointermove', e => {
        if (!activeTarget) return;
        positionTip(activeTarget);
    });
})();

document.addEventListener('pointerdown', e => {
    if (!modal.classList.contains('active')) return;

    const content = modal.querySelector('.modal-content');
    if (!content || !content.contains(e.target)) {
        closeModal();
    }
});
          document.addEventListener("DOMContentLoaded", () => {
      // Debug to ensure we process all links
      console.log("DOM fully loaded. Attaching behavior.");

      const articleLinks = document.querySelectorAll(".article-link");

      articleLinks.forEach(link => {
        link.addEventListener("click", (e) => {
          console.log("Click event fired for:", e.target);

          const url = link.getAttribute("href");
          if (!url) {
            console.error("No URL found for this link!");
          } else {
            console.log("Opening URL:", url);
          }
        });
      });
    });
</script>
</body>
</html>
